# Release ç‰ˆæœ¬å»ºç½®æŒ‡å—

## ğŸ“¦ ç‰ˆæœ¬é¡å‹èªªæ˜

æœ¬å°ˆæ¡ˆæ”¯æ´å…©ç¨® APK ç‰ˆæœ¬ï¼š

| ç‰ˆæœ¬ | ç”¨é€” | ç°½å | æª”æ¡ˆä½ç½® |
|------|------|------|----------|
| **Debug** | é–‹ç™¼æ¸¬è©¦ | Android Studio è‡ªå‹•ç”¢ç”Ÿ | `app/debug/app-debug.apk` |
| **Release** | æ­£å¼ç™¼å¸ƒ | ä½¿ç”¨ champion-king.jks | `app/release/app-release.apk` |

### Debug vs Release å·®ç•°

| é …ç›® | Debug | Release |
|------|-------|---------|
| **ç°½å** | è‡ªå‹•ç”¢ç”Ÿï¼ˆä¸å®‰å…¨ï¼‰ | è‡ªè¨‚ Keystoreï¼ˆå®‰å…¨ï¼‰ |
| **ç¨‹å¼ç¢¼æ··æ·†** | å¦ | å¯é¸ï¼ˆç›®å‰é—œé–‰ï¼‰ |
| **æª”æ¡ˆå¤§å°** | è¼ƒå¤§ | è¼ƒå° |
| **å»ºç½®é€Ÿåº¦** | å¿« | è¼ƒæ…¢ |
| **Firebase App Check** | Debug Provider | Play Integrity Provider |
| **å¯å¦è¦†è“‹å®‰è£** | åªèƒ½è¦†è“‹ Debug ç‰ˆæœ¬ | åªèƒ½è¦†è“‹ Release ç‰ˆæœ¬ |

**é‡è¦ï¼š** Debug APK å’Œ Release APK **ç„¡æ³•ç›¸äº’è¦†è“‹å®‰è£**ï¼

---

## ğŸ”¨ å¦‚ä½•å»ºç½® APK

### æ–¹æ³• 1: å»ºç½® Debug APKï¼ˆé–‹ç™¼æ¸¬è©¦ç”¨ï¼‰

**å¿«é€Ÿå»ºç½®ï¼ˆæ¨è–¦ï¼‰ï¼š**
```
Build â†’ Build Bundle(s) / APK(s) â†’ Build APK(s)
```

**æˆ–ä½¿ç”¨ Gradleï¼š**
```bash
cd C:\Users\User\AndroidStudioProjects\A3
gradlew assembleDebug
```

**ç”¢å‡ºä½ç½®ï¼š**
```
app/build/outputs/apk/debug/app-debug.apk
```

**ç‰¹é»ï¼š**
- âœ… å¿«é€Ÿå»ºç½®ï¼ˆ1-2 åˆ†é˜ï¼‰
- âœ… ä¸éœ€è¦è¼¸å…¥å¯†ç¢¼
- âœ… é©åˆæ—¥å¸¸é–‹ç™¼æ¸¬è©¦
- âŒ ä¸å¯æ­£å¼ç™¼å¸ƒ

---

### æ–¹æ³• 2: å»ºç½® Release APKï¼ˆæ­£å¼ç™¼å¸ƒç”¨ï¼‰

**ä½¿ç”¨ Android Studioï¼š**
```
Build â†’ Generate Signed Bundle / APK
â†’ é¸æ“‡ APK
â†’ Nextï¼ˆå¯†ç¢¼å·²è‡ªå‹•å¡«å…¥ï¼‰
â†’ é¸æ“‡ release
â†’ Create
```

**æˆ–ä½¿ç”¨ Gradleï¼š**
```bash
cd C:\Users\User\AndroidStudioProjects\A3
gradlew assembleRelease
```

**ç”¢å‡ºä½ç½®ï¼š**
```
app/build/outputs/apk/release/app-release.apk
```

**ç‰¹é»ï¼š**
- âœ… å·²ç”¨ Keystore ç°½å
- âœ… å·²å„ªåŒ–ï¼ˆä½†æœªé–‹å•Ÿæ··æ·†ï¼‰
- âœ… å¯æ­£å¼ç™¼å¸ƒ
- âœ… å¯ç”¨æ–¼æ›´æ–°åŠŸèƒ½
- â±ï¸ å»ºç½®æ™‚é–“è¼ƒé•·ï¼ˆ2-3 åˆ†é˜ï¼‰

---

## ğŸ”‘ Keystore ç®¡ç†

### Keystore è³‡è¨Š
```
æª”æ¡ˆä½ç½®ï¼šC:\This is it\å† è»ç‹\08_Keystore\champion-king.jks
Aliasï¼šchampionking
æœ‰æ•ˆæœŸé™ï¼š25 å¹´ï¼ˆè‡³ 2050 å¹´ï¼‰
```

### å¯†ç¢¼å„²å­˜ä½ç½®

**å¯†ç¢¼å„²å­˜åœ¨ï¼š** `local.properties`ï¼ˆæ­¤æª”æ¡ˆä¸æœƒæäº¤åˆ° GitHubï¼‰
```properties
KEYSTORE_FILE=C:\\This is it\\å† è»ç‹\\08_Keystore\\champion-king.jks
KEYSTORE_PASSWORD=ä½ çš„å¯†ç¢¼
KEY_ALIAS=championking
KEY_PASSWORD=ä½ çš„å¯†ç¢¼
```

---

## âš ï¸ æ¥µåº¦é‡è¦çš„æ³¨æ„äº‹é …

### ğŸ”´ Keystore éºå¤± = ç„¡æ³•æ›´æ–° APP

**å¦‚æœéºå¤± Keystore æˆ–å¯†ç¢¼ï¼š**
- âŒ ç„¡æ³•ç™¼å¸ƒæ›´æ–°ç‰ˆæœ¬
- âŒ ä½¿ç”¨è€…å¿…é ˆ**è§£é™¤å®‰è£**èˆŠç‰ˆæœ¬æ‰èƒ½å®‰è£æ–°ç‰ˆæœ¬
- âŒ **æ‰€æœ‰æœ¬åœ°è³‡æ–™æœƒéºå¤±**

**é é˜²æªæ–½ï¼š**
1. âœ… ç«‹å³å‚™ä»½ Keystore åˆ°å¤šå€‹ä½ç½®
2. âœ… å¯†ç¢¼è¨˜éŒ„åœ¨å®‰å…¨çš„åœ°æ–¹
3. âœ… å®šæœŸæª¢æŸ¥å‚™ä»½æ˜¯å¦å®Œæ•´

### å»ºè­°å‚™ä»½ä½ç½®

**è‡³å°‘å‚™ä»½åˆ°ä»¥ä¸‹ 3 å€‹åœ°æ–¹ï¼š**
1. ğŸ”’ **åŠ å¯†é›²ç«¯å„²å­˜**ï¼ˆGoogle Driveã€Dropboxã€OneDriveï¼‰
2. ğŸ’¾ **å¤–æ¥ç¡¬ç¢Ÿæˆ– USB**
3. ğŸ“§ **åŠ å¯†éƒµä»¶å¯„çµ¦è‡ªå·±**ï¼ˆZIP åŠ å¯†å¾Œå¯„é€ï¼‰

**å‚™ä»½å…§å®¹ï¼š**
```
champion-king.jksï¼ˆKeystore æª”æ¡ˆï¼‰
keystore-info.txtï¼ˆè¨˜éŒ„å¯†ç¢¼å’Œ aliasï¼‰
```

---

## ğŸš€ ç™¼å¸ƒæ–°ç‰ˆæœ¬æµç¨‹

### Step 1: æ›´æ–°ç‰ˆæœ¬è™Ÿ

ç·¨è¼¯ `app/build.gradle.kts`ï¼š
```kotlin
defaultConfig {
    versionCode = 4        // â† éå¢ï¼ˆå¿…é ˆæ¯”èˆŠç‰ˆæœ¬å¤§ï¼‰
    versionName = "1.0.4"  // â† æ›´æ–°ç‰ˆæœ¬è™Ÿ
}
```

**é‡è¦è¦å‰‡ï¼š**
- `versionCode` **å¿…é ˆéå¢**ï¼ˆæ•´æ•¸ï¼‰
- `versionName` æ˜¯é¡¯ç¤ºçµ¦ä½¿ç”¨è€…çœ‹çš„ï¼ˆå­—ä¸²ï¼‰

---

### Step 2: å»ºç½® Release APK
```
Build â†’ Generate Signed Bundle / APK â†’ APK
â†’ Next â†’ é¸æ“‡ release â†’ Create
```

å»ºç½®å®Œæˆå¾Œï¼ŒAPK åœ¨ï¼š
```
app/release/app-release.apk
```

å»ºè­°é‡æ–°å‘½åï¼š
```
app-release-v1.0.4.apk
```

---

### Step 3: ä¸Šå‚³åˆ° Firebase Storage

1. é€²å…¥ Firebase Console â†’ Storage
2. ä¸Šå‚³ APKï¼š`app-release-v1.0.4.apk`
3. é»æ“Šæª”æ¡ˆ â†’ è¤‡è£½ã€Œä¸‹è¼‰ç¶²å€ã€

---

### Step 4: æ›´æ–° Firestore ç‰ˆæœ¬è³‡è¨Š
```
Firebase Console â†’ Firestore Database â†’ app_versions â†’ current

æ›´æ–°ï¼š
- versionCode: 4
- versionName: "1.0.4"
- downloadUrl: "https://firebasestorage.googleapis.com/..."
- updateMessage: "æ–°å¢åŠŸèƒ½ï¼š...\nä¿®æ­£éŒ¯èª¤ï¼š..."
```

---

### Step 5: æ¸¬è©¦

1. ä½¿ç”¨èˆŠç‰ˆæœ¬ APP ç™»å…¥
2. æ‡‰è©²å½ˆå‡ºæ›´æ–°æç¤º
3. é»æ“Šã€Œç«‹å³æ›´æ–°ã€æ¸¬è©¦ä¸‹è¼‰å’Œå®‰è£

---

## ğŸ§ª æ¸¬è©¦å»ºè­°

### æ¸¬è©¦æƒ…å¢ƒ 1ï¼šæ–°å®‰è£

**æ­¥é©Ÿï¼š**
1. å®Œå…¨è§£é™¤å®‰è£ APP
2. å®‰è£ Release APK
3. æ¸¬è©¦æ‰€æœ‰åŠŸèƒ½

**æª¢æŸ¥é …ç›®ï¼š**
- âœ… è¨»å†ŠåŠŸèƒ½æ­£å¸¸
- âœ… ç™»å…¥åŠŸèƒ½æ­£å¸¸
- âœ… Firebase é€£ç·šæ­£å¸¸
- âœ… ç‰ˆæœ¬è™Ÿé¡¯ç¤ºæ­£ç¢º

---

### æ¸¬è©¦æƒ…å¢ƒ 2ï¼šè¦†è“‹æ›´æ–°

**æ­¥é©Ÿï¼š**
1. å…ˆå®‰è£èˆŠç‰ˆæœ¬ Release APK
2. ç™»å…¥ä¸¦ä½¿ç”¨
3. å®‰è£æ–°ç‰ˆæœ¬ Release APKï¼ˆè¦†è“‹ï¼‰
4. ç¢ºèªç™»å…¥ç‹€æ…‹ä¿æŒ

**æª¢æŸ¥é …ç›®ï¼š**
- âœ… å¯ä»¥è¦†è“‹å®‰è£ï¼ˆä¸ç”¨è§£é™¤å®‰è£ï¼‰
- âœ… ä½¿ç”¨è€…è³‡æ–™ä¿ç•™
- âœ… ç™»å…¥ç‹€æ…‹ä¿æŒ
- âœ… ç‰ˆæœ¬è™Ÿæ›´æ–°

---

### æ¸¬è©¦æƒ…å¢ƒ 3ï¼šAPP å…§æ›´æ–°

**æ­¥é©Ÿï¼š**
1. ä½¿ç”¨èˆŠç‰ˆæœ¬ APP
2. ç™»å…¥å¾Œè§¸ç™¼è‡ªå‹•æª¢æŸ¥æ›´æ–°
3. é»æ“Šã€Œç«‹å³æ›´æ–°ã€
4. ä¸‹è¼‰ä¸¦å®‰è£æ–°ç‰ˆæœ¬

**æª¢æŸ¥é …ç›®ï¼š**
- âœ… æ›´æ–°å°è©±æ¡†é¡¯ç¤ºæ­£ç¢º
- âœ… ä¸‹è¼‰é€²åº¦æ­£å¸¸
- âœ… å®‰è£æˆåŠŸ
- âœ… æ›´æ–°å¾Œç‰ˆæœ¬æ­£ç¢º

---

## ğŸ› å¸¸è¦‹å•é¡Œ

### Q1: å»ºç½® Release æ™‚æç¤ºæ‰¾ä¸åˆ° Keystoreï¼Ÿ

**åŸå› ï¼š** `local.properties` è·¯å¾‘éŒ¯èª¤

**è§£æ±ºæ–¹å¼ï¼š**
1. æ‰“é–‹ `local.properties`
2. ç¢ºèª `KEYSTORE_FILE` è·¯å¾‘æ­£ç¢º
3. è·¯å¾‘ä¸­çš„ `\` è¦å¯«æˆ `\\`
```properties
# æ­£ç¢º
KEYSTORE_FILE=C:\\This is it\\å† è»ç‹\\08_Keystore\\champion-king.jks

# éŒ¯èª¤
KEYSTORE_FILE=C:\This is it\å† è»ç‹\08_Keystore\champion-king.jks
```

---

### Q2: å»ºç½® Release æ™‚æç¤ºå¯†ç¢¼éŒ¯èª¤ï¼Ÿ

**åŸå› ï¼š** `local.properties` ä¸­çš„å¯†ç¢¼éŒ¯èª¤

**è§£æ±ºæ–¹å¼ï¼š**
1. æª¢æŸ¥ `local.properties` ä¸­çš„å¯†ç¢¼
2. ç¢ºèªç­‰è™Ÿå…©é‚Šæ²’æœ‰ç©ºæ ¼
3. ç¢ºèªå¯†ç¢¼æ­£ç¢º

---

### Q3: Release APK ç„¡æ³•è¦†è“‹å®‰è£ï¼Ÿ

**å¯èƒ½åŸå› ï¼š**

**æƒ…æ³ 1ï¼š** å˜—è©¦ç”¨ Release è¦†è“‹ Debug
- **è§£æ±ºï¼š** å…ˆè§£é™¤å®‰è£ Debug ç‰ˆæœ¬

**æƒ…æ³ 2ï¼š** Keystore ç°½åä¸åŒ
- **è§£æ±ºï¼š** ç¢ºèªä½¿ç”¨åŒä¸€å€‹ Keystore

**æƒ…æ³ 3ï¼š** versionCode æ²’æœ‰éå¢
- **è§£æ±ºï¼š** æ–°ç‰ˆæœ¬çš„ versionCode å¿…é ˆ > èˆŠç‰ˆæœ¬

---

### Q4: å¿˜è¨˜ Keystore å¯†ç¢¼æ€éº¼è¾¦ï¼Ÿ

**å£æ¶ˆæ¯ï¼š** ç„¡æ³•æ‰¾å›å¯†ç¢¼

**è§£æ±ºæ–¹å¼ï¼š**
1. åªèƒ½ç”¢ç”Ÿæ–°çš„ Keystore
2. æ‰€æœ‰å·²å®‰è£çš„ APP **ç„¡æ³•æ›´æ–°**
3. ä½¿ç”¨è€…å¿…é ˆè§£é™¤å®‰è£èˆŠç‰ˆæœ¬

**é é˜²ï¼š**
- å¯†ç¢¼è¨˜éŒ„åœ¨å®‰å…¨çš„åœ°æ–¹
- å®šæœŸæª¢æŸ¥å¯†ç¢¼æ˜¯å¦æ­£ç¢º

---

### Q5: å¦‚ä½•çŸ¥é“ APK æ˜¯ Debug é‚„æ˜¯ Releaseï¼Ÿ

**æ–¹æ³• 1ï¼šæª”æ¡ˆåç¨±**
```
app-debug.apk â†’ Debug ç‰ˆæœ¬
app-release.apk â†’ Release ç‰ˆæœ¬
```

**æ–¹æ³• 2ï¼šæª”æ¡ˆä½ç½®**
```
app/debug/ â†’ Debug ç‰ˆæœ¬
app/release/ â†’ Release ç‰ˆæœ¬
```

**æ–¹æ³• 3ï¼šå®‰è£å¾Œæª¢æŸ¥**
- å®‰è£ APK
- é€²å…¥ APP
- æª¢æŸ¥ Firebase App Check çš„ Log
  - "Using DebugAppCheckProvider" â†’ Debug
  - "Using PlayIntegrityAppCheckProvider" â†’ Release

---

## ğŸ“± ç‰ˆæœ¬ç®¡ç†æœ€ä½³å¯¦è¸

### ç‰ˆæœ¬è™Ÿå‘½åè¦å‰‡

å»ºè­°ä½¿ç”¨ **èªç¾©åŒ–ç‰ˆæœ¬è™Ÿ**ï¼š
```
ä¸»ç‰ˆæœ¬è™Ÿ.æ¬¡ç‰ˆæœ¬è™Ÿ.ä¿®è¨‚è™Ÿ
ä¾‹å¦‚ï¼š1.0.0, 1.0.1, 1.1.0, 2.0.0
```

**è¦å‰‡ï¼š**
- **ä¸»ç‰ˆæœ¬è™Ÿ**ï¼šé‡å¤§æ›´æ–°ï¼ˆUI æ”¹ç‰ˆã€æ¶æ§‹é‡æ§‹ï¼‰
- **æ¬¡ç‰ˆæœ¬è™Ÿ**ï¼šæ–°å¢åŠŸèƒ½
- **ä¿®è¨‚è™Ÿ**ï¼šBug ä¿®å¾©ã€å°æ”¹é€²

**ç¯„ä¾‹ï¼š**
```
1.0.0 â†’ é¦–æ¬¡ç™¼å¸ƒ
1.0.1 â†’ ä¿®æ­£éŒ¯èª¤
1.0.2 â†’ ä¿®æ­£æ›´å¤šéŒ¯èª¤
1.1.0 â†’ æ–°å¢åŠŸèƒ½
2.0.0 â†’ é‡å¤§æ”¹ç‰ˆ
```

---

### ç‰ˆæœ¬ç™¼å¸ƒæª¢æŸ¥æ¸…å–®

**ç™¼å¸ƒå‰ç¢ºèªï¼š**
- [ ] æ›´æ–° `versionCode`ï¼ˆéå¢ï¼‰
- [ ] æ›´æ–° `versionName`ï¼ˆç¬¦åˆè¦ç¯„ï¼‰
- [ ] æ¸¬è©¦ Debug ç‰ˆæœ¬æ‰€æœ‰åŠŸèƒ½
- [ ] å»ºç½® Release APK
- [ ] æ¸¬è©¦ Release APK å®‰è£
- [ ] æ¸¬è©¦è¦†è“‹æ›´æ–°åŠŸèƒ½
- [ ] ä¸Šå‚³ APK åˆ° Firebase Storage
- [ ] æ›´æ–° Firestore ç‰ˆæœ¬è³‡è¨Š
- [ ] æ¸¬è©¦è‡ªå‹•æ›´æ–°åŠŸèƒ½
- [ ] è¨˜éŒ„ç‰ˆæœ¬æ›´æ–°æ—¥èªŒ

---

## ğŸ” å®‰å…¨æ€§å»ºè­°

### ä¸è¦æ´©æ¼çš„è³‡è¨Š

**çµ•å°ä¸å¯æäº¤åˆ° GitHubï¼š**
- âŒ Keystore æª”æ¡ˆï¼ˆ`.jks`, `.keystore`ï¼‰
- âŒ Keystore å¯†ç¢¼
- âŒ `local.properties` æª”æ¡ˆ
- âŒ Firebase `google-services.json`ï¼ˆå·²å¿½ç•¥ï¼‰

**å·²åœ¨ `.gitignore` ä¸­ï¼š**
```
*.jks
*.keystore
local.properties
google-services.json
```

---

### å¯†ç¢¼å®‰å…¨

**å¯†ç¢¼å¼·åº¦å»ºè­°ï¼š**
- âœ… è‡³å°‘ 8 å€‹å­—å…ƒ
- âœ… åŒ…å«å¤§å°å¯«å­—æ¯
- âœ… åŒ…å«æ•¸å­—
- âœ… åŒ…å«ç‰¹æ®Šç¬¦è™Ÿ

**ç¯„ä¾‹ï¼š**
```
ChampionKing2025!
CK#App@2025
```

---

## ğŸ“š åƒè€ƒæª”æ¡ˆ

### ç›¸é—œæª”æ¡ˆä½ç½®
```
å°ˆæ¡ˆçµæ§‹ï¼š
A3/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ build.gradle.kts          # å»ºç½®è¨­å®šã€ç°½åé…ç½®
â”‚   â”œâ”€â”€ src/main/
â”‚   â”‚   â””â”€â”€ java/.../MyApp.kt     # App Check è¨­å®š
â”‚   â””â”€â”€ build/outputs/apk/
â”‚       â”œâ”€â”€ debug/
â”‚       â”‚   â””â”€â”€ app-debug.apk     # Debug APK
â”‚       â””â”€â”€ release/
â”‚           â””â”€â”€ app-release.apk   # Release APK
â”œâ”€â”€ local.properties              # Keystore å¯†ç¢¼ï¼ˆä¸æäº¤ï¼‰
â”œâ”€â”€ .gitignore                    # Git å¿½ç•¥æª”æ¡ˆè¨­å®š
â”œâ”€â”€ UPDATE_GUIDE.md               # æ›´æ–°åŠŸèƒ½ä½¿ç”¨æŒ‡å—
â””â”€â”€ RELEASE_BUILD_GUIDE.md        # æœ¬æª”æ¡ˆ
```

### Keystore ä½ç½®
```
C:\This is it\å† è»ç‹\08_Keystore\champion-king.jks
```

---

## ğŸ“ æ”¯æ´è³‡è¨Š

### Firebase å°ˆæ¡ˆ

- **å°ˆæ¡ˆ IDï¼š** sca3-69342
- **ä¸»æ§å°ï¼š** https://console.firebase.google.com/project/sca3-69342
- **éƒ¨ç½²åœ°å€ï¼š** asia-east1ï¼ˆå°ç£ï¼‰

### é‡è¦é€£çµ

- [Android ç°½åæ–‡ä»¶](https://developer.android.com/studio/publish/app-signing)
- [Keystore ç®¡ç†æœ€ä½³å¯¦è¸](https://developer.android.com/training/articles/keystore)
- [ç‰ˆæœ¬ç®¡ç†æŒ‡å—](https://developer.android.com/studio/publish/versioning)

---

## ğŸ“ ç‰ˆæœ¬æ­·å²

### v1.0 (2025-10-25)
- âœ… è¨­å®š Release ç‰ˆæœ¬å»ºç½®
- âœ… ç”¢ç”Ÿ Keystore ç°½åæª”
- âœ… è¨­å®šè‡ªå‹•ç°½åé…ç½®
- âœ… å¯†ç¢¼å®‰å…¨å„²å­˜åœ¨ local.properties
- âœ… æ”¯æ´ Debug å’Œ Release é›™ç‰ˆæœ¬

---

**æ–‡ä»¶æ›´æ–°æ—¥æœŸï¼š** 2025-10-25  
**æ–‡ä»¶ç‰ˆæœ¬ï¼š** 1.0  
**Keystore æœ‰æ•ˆæœŸé™ï¼š** 2050 å¹´