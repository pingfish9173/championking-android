# APP ç‰ˆæœ¬æ›´æ–°åŠŸèƒ½ - ä½¿ç”¨æŒ‡å—

## âœ¨ åŠŸèƒ½æ¦‚è¿°

æœ¬ APP å…·å‚™å®Œæ•´çš„æ‡‰ç”¨ç¨‹å¼å…§æ›´æ–°ï¼ˆIn-App Updateï¼‰åŠŸèƒ½ï¼š

- âœ… **è‡ªå‹•æª¢æŸ¥æ›´æ–°** - ç™»å…¥å¾Œè‡ªå‹•è§¸ç™¼
- âœ… **æ‰‹å‹•æª¢æŸ¥æ›´æ–°** - ç”¨æˆ¶è³‡è¨Šé é¢æä¾›æª¢æŸ¥æŒ‰éˆ•
- âœ… **APK è‡ªå‹•ä¸‹è¼‰èˆ‡å®‰è£** - ä½¿ç”¨ DownloadManager
- âœ… **ä¸‹è¼‰é€²åº¦é¡¯ç¤º** - å³æ™‚é¡¯ç¤ºä¸‹è¼‰ç™¾åˆ†æ¯”
- âœ… **å¯é¸æ›´æ–° vs å¼·åˆ¶æ›´æ–°** - å½ˆæ€§æ§åˆ¶æ›´æ–°ç­–ç•¥
- âœ… **è·³éç‰ˆæœ¬åŠŸèƒ½** - ä½¿ç”¨è€…å¯é¸æ“‡è·³éç‰¹å®šç‰ˆæœ¬
- âœ… **ç¶­è­·æ¨¡å¼** - ç³»çµ±ç¶­è­·æ™‚é˜»æ“‹ä½¿ç”¨è€…ç™»å…¥
- âœ… **è‡ªå‹•æª¢æŸ¥é–‹é—œ** - ä½¿ç”¨è€…å¯è‡ªè¡Œæ§åˆ¶æ˜¯å¦è‡ªå‹•æª¢æŸ¥

---

## ğŸš€ å¦‚ä½•ç™¼å¸ƒæ–°ç‰ˆæœ¬ï¼ˆå®Œæ•´æµç¨‹ï¼‰

### Step 1: ä¿®æ”¹ APP ç‰ˆæœ¬è™Ÿ

ç·¨è¼¯ `app/build.gradle.kts`ï¼š
```kotlin
defaultConfig {
    applicationId = "com.champion.king"
    minSdk = 24
    targetSdk = 34
    versionCode = 3        // â† éå¢ï¼ˆå¿…é ˆæ¯”èˆŠç‰ˆæœ¬å¤§ï¼‰
    versionName = "1.0.3"  // â† æ›´æ–°ç‰ˆæœ¬åç¨±
    ...
}
```

**é‡è¦ï¼š**
- `versionCode` å¿…é ˆæ˜¯æ•´æ•¸ï¼Œä¸”æ¯æ¬¡ç™¼å¸ƒå¿…é ˆéå¢
- `versionName` æ˜¯é¡¯ç¤ºçµ¦ä½¿ç”¨è€…çœ‹çš„ç‰ˆæœ¬è™Ÿ

---

### Step 2: ç·¨è­¯æ–°ç‰ˆæœ¬ APK

**Debug ç‰ˆæœ¬ï¼ˆæ¸¬è©¦ç”¨ï¼‰ï¼š**
```
Android Studio â†’ Build â†’ Build Bundle(s) / APK(s) â†’ Build APK(s)
```

**Release ç‰ˆæœ¬ï¼ˆæ­£å¼ç™¼å¸ƒï¼‰ï¼š**
```
Android Studio â†’ Build â†’ Generate Signed Bundle / APK
â†’ é¸æ“‡ APK
â†’ é¸æ“‡ keystore
â†’ é¸æ“‡ release
â†’ Build
```

APK ä½ç½®ï¼š
- Debug: `app/build/outputs/apk/debug/app-debug.apk`
- Release: `app/build/outputs/apk/release/app-release.apk`

---

### Step 3: ä¸Šå‚³ APK åˆ° Firebase Storage

1. **é€²å…¥ Firebase Console**
   - https://console.firebase.google.com
   - é¸æ“‡å°ˆæ¡ˆï¼š`sca3-69342`

2. **é€²å…¥ Storage**
   - å·¦å´é¸å–® â†’ Storage

3. **ä¸Šå‚³ APK**
   - é»æ“Šã€Œä¸Šå‚³æª”æ¡ˆã€
   - é¸æ“‡æ–°ç·¨è­¯çš„ APKï¼ˆå»ºè­°å‘½åï¼š`app-release-v1.0.3.apk`ï¼‰

4. **å–å¾—ä¸‹è¼‰ç¶²å€**
   - ä¸Šå‚³å®Œæˆå¾Œï¼Œé»æ“Šè©²æª”æ¡ˆ
   - åœ¨å³å´é¢æ¿æ‰¾åˆ°ã€Œä¸‹è¼‰ç¶²å€ã€
   - é»æ“Šè¤‡è£½åœ–ç¤º

---

### Step 4: æ›´æ–° Firestore ç‰ˆæœ¬è³‡è¨Š

1. **é€²å…¥ Firestore Database**
   - Firebase Console â†’ Firestore Database

2. **ç·¨è¼¯ç‰ˆæœ¬è³‡è¨Š**
   - å°èˆªåˆ°ï¼š`app_versions` â†’ `current`
   - é»æ“Šã€Œç·¨è¼¯æ–‡ä»¶ã€

3. **æ›´æ–°ä»¥ä¸‹æ¬„ä½ï¼š**

| æ¬„ä½ | èªªæ˜ | ç¯„ä¾‹å€¼ |
|------|------|--------|
| `versionCode` | ç‰ˆæœ¬ä»£ç¢¼ï¼ˆæ•´æ•¸ï¼‰ | `3` |
| `versionName` | ç‰ˆæœ¬åç¨±ï¼ˆå­—ä¸²ï¼‰ | `"1.0.3"` |
| `downloadUrl` | APK ä¸‹è¼‰ç¶²å€ | `"https://firebasestorage.googleapis.com/..."` |
| `updateType` | æ›´æ–°é¡å‹ | `"optional"` æˆ– `"force"` |
| `updateMessage` | æ›´æ–°èªªæ˜ | `"æ–°å¢åŠŸèƒ½ï¼š...\nä¿®æ­£éŒ¯èª¤ï¼š..."` |
| `maintenanceMode` | ç¶­è­·æ¨¡å¼ | `false` |
| `maintenanceMessage` | ç¶­è­·è¨Šæ¯ | `""` |

4. **å„²å­˜è®Šæ›´**

---

### Step 5: æ¸¬è©¦æ›´æ–°åŠŸèƒ½

1. **ä½¿ç”¨èˆŠç‰ˆæœ¬ APP**ï¼ˆversionCode æ¯” Firestore å°ï¼‰
2. **ç™»å…¥ APP**
3. **æ‡‰è©²è‡ªå‹•å½ˆå‡ºæ›´æ–°å°è©±æ¡†**
4. **é»æ“Šã€Œç«‹å³æ›´æ–°ã€æ¸¬è©¦ä¸‹è¼‰èˆ‡å®‰è£**

---

## ğŸ“Š Firestore è³‡æ–™çµæ§‹

### é›†åˆï¼š`app_versions`
### æ–‡ä»¶ï¼š`current`
```json
{
  "versionCode": 3,
  "versionName": "1.0.3",
  "downloadUrl": "https://firebasestorage.googleapis.com/v0/b/sca3-69342.firebasestorage.app/o/app-release-v1.0.3.apk?alt=media&token=...",
  "updateType": "optional",
  "updateMessage": "æ–°å¢åŠŸèƒ½ï¼š\n- åŠŸèƒ½ A\n- åŠŸèƒ½ B\n\nä¿®æ­£éŒ¯èª¤ï¼š\n- ä¿®æ­£ Bug X",
  "maintenanceMode": false,
  "maintenanceMessage": ""
}
```

### æ¬„ä½èªªæ˜

#### `versionCode` (number)
- APP çš„ç‰ˆæœ¬ä»£ç¢¼ï¼Œç”¨æ–¼æ¯”å°æ˜¯å¦éœ€è¦æ›´æ–°
- **å¿…é ˆéå¢**ï¼Œæ–°ç‰ˆæœ¬å¿…é ˆ > èˆŠç‰ˆæœ¬
- ç¯„ä¾‹ï¼š`1`, `2`, `3`, `4`...

#### `versionName` (string)
- é¡¯ç¤ºçµ¦ä½¿ç”¨è€…çš„ç‰ˆæœ¬è™Ÿ
- ç¯„ä¾‹ï¼š`"1.0.0"`, `"1.0.1"`, `"1.1.0"`, `"2.0.0"`

#### `downloadUrl` (string)
- APK çš„ä¸‹è¼‰ç¶²å€ï¼ˆFirebase Storageï¼‰
- å¿…é ˆæ˜¯å®Œæ•´çš„ URLï¼ŒåŒ…å« token
- ç¯„ä¾‹ï¼š`"https://firebasestorage.googleapis.com/..."`

#### `updateType` (string)
æ›´æ–°é¡å‹ï¼Œå½±éŸ¿ä½¿ç”¨è€…é«”é©—ï¼š

| å€¼ | èªªæ˜ | è¡Œç‚º |
|---|------|------|
| `"optional"` | å¯é¸æ›´æ–° | ä½¿ç”¨è€…å¯é¸æ“‡ã€Œç«‹å³æ›´æ–°ã€ã€ã€Œç¨å¾Œæé†’ã€æˆ–ã€Œè·³éæ­¤ç‰ˆæœ¬ã€ |
| `"force"` | å¼·åˆ¶æ›´æ–° | ä½¿ç”¨è€…åªèƒ½é¸æ“‡ã€Œç«‹å³æ›´æ–°ã€ï¼Œç„¡æ³•è·³é |

#### `updateMessage` (string)
- æ›´æ–°å…§å®¹èªªæ˜
- æ”¯æ´æ›è¡Œç¬¦è™Ÿ `\n`
- å»ºè­°æ ¼å¼ï¼š
```
  æ–°å¢åŠŸèƒ½ï¼š
  - åŠŸèƒ½ A
  - åŠŸèƒ½ B
  
  ä¿®æ­£éŒ¯èª¤ï¼š
  - ä¿®æ­£ Bug X
  - æ”¹å–„æ•ˆèƒ½
```

#### `maintenanceMode` (boolean)
- ç¶­è­·æ¨¡å¼é–‹é—œ
- `true`ï¼šå•Ÿç”¨ç¶­è­·æ¨¡å¼ï¼Œé˜»æ“‹ä½¿ç”¨è€…ä½¿ç”¨ APP
- `false`ï¼šæ­£å¸¸é‹ä½œ

#### `maintenanceMessage` (string)
- ç¶­è­·æ¨¡å¼æ™‚é¡¯ç¤ºçš„è¨Šæ¯
- åªåœ¨ `maintenanceMode = true` æ™‚æœ‰æ•ˆ
- ç¯„ä¾‹ï¼š`"ç³»çµ±ç¶­è­·ä¸­ï¼Œé è¨ˆ 2025/10/25 14:00 å®Œæˆ"`

---

## âš™ï¸ API ç«¯é»

### ç‰ˆæœ¬æª¢æŸ¥ API

**URLï¼š**
```
https://checkversion-qmvrvane7q-de.a.run.app/
```

**Methodï¼š** `GET`

**å›æ‡‰æ ¼å¼ï¼š**
```json
{
  "versionCode": 3,
  "versionName": "1.0.3",
  "downloadUrl": "https://firebasestorage.googleapis.com/...",
  "updateType": "optional",
  "updateMessage": "æ–°å¢åŠŸèƒ½ï¼š...",
  "maintenanceMode": false,
  "maintenanceMessage": ""
}
```

**æ¸¬è©¦æ–¹å¼ï¼š**
ä½¿ç”¨ Postman æˆ–ç€è¦½å™¨ç›´æ¥è¨ªå•è©² URL

---

## ğŸ§ª æ¸¬è©¦å ´æ™¯

### æ¸¬è©¦ 1ï¼šå¯é¸æ›´æ–°

**è¨­å®šï¼š**
```json
{
  "versionCode": 2,
  "versionName": "1.0.2",
  "updateType": "optional",
  "updateMessage": "æ¸¬è©¦å¯é¸æ›´æ–°",
  ...
}
```

**é æœŸè¡Œç‚ºï¼š**
1. ç™»å…¥å¾Œå½ˆå‡ºæ›´æ–°å°è©±æ¡†
2. é¡¯ç¤ºã€Œç™¼ç¾æ–°ç‰ˆæœ¬ï¼š1.0.2ã€
3. æä¾›ä¸‰å€‹æŒ‰éˆ•ï¼š
   - ã€Œç«‹å³æ›´æ–°ã€â†’ é–‹å§‹ä¸‹è¼‰
   - ã€Œç¨å¾Œæé†’ã€â†’ é—œé–‰å°è©±æ¡†
   - ã€Œè·³éæ­¤ç‰ˆæœ¬ã€â†’ æœ¬ç‰ˆæœ¬ä¸å†æç¤º

---

### æ¸¬è©¦ 2ï¼šå¼·åˆ¶æ›´æ–°

**è¨­å®šï¼š**
```json
{
  "versionCode": 2,
  "versionName": "1.0.2",
  "updateType": "force",
  "updateMessage": "é‡è¦æ›´æ–°ï¼Œè«‹ç«‹å³æ›´æ–°",
  ...
}
```

**é æœŸè¡Œç‚ºï¼š**
1. ç™»å…¥å¾Œå½ˆå‡ºæ›´æ–°å°è©±æ¡†
2. **åªæœ‰ã€Œç«‹å³æ›´æ–°ã€æŒ‰éˆ•**
3. ç„¡æ³•é—œé–‰å°è©±æ¡†ï¼ˆé»æ“Šå¤–éƒ¨ç„¡æ•ˆï¼‰
4. å¿…é ˆæ›´æ–°æ‰èƒ½ä½¿ç”¨ APP

---

### æ¸¬è©¦ 3ï¼šç¶­è­·æ¨¡å¼

**è¨­å®šï¼š**
```json
{
  "maintenanceMode": true,
  "maintenanceMessage": "ç³»çµ±ç¶­è­·ä¸­ï¼Œé è¨ˆ 14:00 æ¢å¾©æœå‹™",
  ...
}
```

**é æœŸè¡Œç‚ºï¼š**
1. ç™»å…¥å¾Œå½ˆå‡ºç¶­è­·å°è©±æ¡†
2. é¡¯ç¤ºç¶­è­·è¨Šæ¯
3. é»æ“Šã€Œç¢ºå®šã€å¾Œé—œé–‰ APP

---

### æ¸¬è©¦ 4ï¼šç„¡æ›´æ–°

**è¨­å®šï¼š**
- Firestore çš„ `versionCode` = APP çš„ `versionCode`

**é æœŸè¡Œç‚ºï¼š**
1. ç™»å…¥å¾Œä¸å½ˆå‡ºä»»ä½•å°è©±æ¡†
2. æ‰‹å‹•é»æ“Šã€Œæª¢æŸ¥æ›´æ–°ã€â†’ é¡¯ç¤ºã€Œå·²æ˜¯æœ€æ–°ç‰ˆæœ¬ã€

---

### æ¸¬è©¦ 5ï¼šæ‰‹å‹•æª¢æŸ¥æ›´æ–°

**æ“ä½œï¼š**
1. ç™»å…¥ APP
2. é€²å…¥ã€Œç”¨æˆ¶è³‡è¨Šã€é é¢
3. é»æ“Šã€Œæª¢æŸ¥æ›´æ–°ã€æŒ‰éˆ•

**é æœŸè¡Œç‚ºï¼š**
- é¡¯ç¤º Toastï¼šã€Œæ­£åœ¨æª¢æŸ¥æ›´æ–°...ã€
- æ ¹æ“šç‰ˆæœ¬ç‹€æ…‹é¡¯ç¤ºå°æ‡‰çµæœ
- æ›´æ–°ã€Œä¸Šæ¬¡æª¢æŸ¥æ™‚é–“ã€

---

### æ¸¬è©¦ 6ï¼šä¸‹è¼‰èˆ‡å®‰è£

**æ“ä½œï¼š**
1. è§¸ç™¼æ›´æ–°ï¼ˆversionCode æ¯” APP å¤§ï¼‰
2. é»æ“Šã€Œç«‹å³æ›´æ–°ã€

**é æœŸè¡Œç‚ºï¼š**
1. é¡¯ç¤ºé€²åº¦å°è©±æ¡†ï¼šã€Œæ­£åœ¨ä¸‹è¼‰æ›´æ–°ã€
2. é€²åº¦æ¢å¾ 0% â†’ 100%
3. ä¸‹è¼‰å®Œæˆå¾Œè‡ªå‹•è·³è½‰åˆ°å®‰è£é é¢
4. ä½¿ç”¨è€…é»æ“Šã€Œå®‰è£ã€å®Œæˆæ›´æ–°

---

## ğŸ“± ä½¿ç”¨è€…é«”é©—æµç¨‹

### è‡ªå‹•æª¢æŸ¥æ™‚æ©Ÿ

1. **ç™»å…¥æˆåŠŸå¾Œ** - è‡ªå‹•æª¢æŸ¥ä¸€æ¬¡
2. **APP å¾èƒŒæ™¯å›åˆ°å‰æ™¯æ™‚** - å¦‚æœè·é›¢ä¸Šæ¬¡æª¢æŸ¥ > 5 åˆ†é˜

### æ‰‹å‹•æª¢æŸ¥

ä½¿ç”¨è€…å¯éš¨æ™‚åœ¨ã€Œç”¨æˆ¶è³‡è¨Šã€é é¢é»æ“Šã€Œæª¢æŸ¥æ›´æ–°ã€æŒ‰éˆ•

### ä¸‹è¼‰æµç¨‹
```
é»æ“Šã€Œç«‹å³æ›´æ–°ã€
    â†“
é¡¯ç¤ºä¸‹è¼‰é€²åº¦å°è©±æ¡†
    â†“
é€²åº¦ï¼š0% â†’ 100%
    â†“
è‡ªå‹•è·³è½‰åˆ°ç³»çµ±å®‰è£é é¢
    â†“
ä½¿ç”¨è€…é»æ“Šã€Œå®‰è£ã€
    â†“
å®‰è£å®Œæˆ
    â†“
ä½¿ç”¨è€…æ‰‹å‹•é–‹å•Ÿæ–°ç‰ˆæœ¬ APP
```

---

## âš ï¸ é‡è¦æ³¨æ„äº‹é …

### 1. versionCode å¿…é ˆéå¢
- Android ç³»çµ±ä½¿ç”¨ `versionCode` åˆ¤æ–·ç‰ˆæœ¬æ–°èˆŠ
- **æ–°ç‰ˆæœ¬çš„ versionCode å¿…é ˆå¤§æ–¼èˆŠç‰ˆæœ¬**
- éŒ¯èª¤ç¯„ä¾‹ï¼šèˆŠç‰ˆæœ¬ versionCode=3ï¼Œæ–°ç‰ˆæœ¬ versionCode=2 âŒ

### 2. APK ç°½åä¸€è‡´æ€§
- **æ‰€æœ‰ç‰ˆæœ¬çš„ APK å¿…é ˆä½¿ç”¨ç›¸åŒçš„ç°½å**
- Debug ç°½åå’Œ Release ç°½åä¸åŒ
- æ¸¬è©¦æ™‚å¯ç”¨ debug APK
- æ­£å¼ç™¼å¸ƒå¿…é ˆç”¨ release ç°½å

### 3. å®‰è£æ¬Šé™
- Android 8.0+ éœ€è¦ã€Œå…è¨±å®‰è£æœªçŸ¥ä¾†æºã€æ¬Šé™
- APP å·²åŒ…å«å¿…è¦çš„ `REQUEST_INSTALL_PACKAGES` æ¬Šé™
- é¦–æ¬¡å®‰è£æ™‚ï¼Œç³»çµ±æœƒæç¤ºä½¿ç”¨è€…æˆæ¬Š

### 4. ç¶²è·¯ç’°å¢ƒ
- APK ä¸‹è¼‰éœ€è¦ç©©å®šçš„ç¶²è·¯é€£ç·š
- å»ºè­°ä½¿ç”¨ WiFi ä¸‹è¼‰ï¼ˆAPK é€šå¸¸ 10-20 MBï¼‰
- å·²æ”¯æ´è¡Œå‹•ç¶²è·¯ä¸‹è¼‰

### 5. å„²å­˜ç©ºé–“
- ä¸‹è¼‰ä½ç½®ï¼š`/Android/data/com.champion.king/files/Download/`
- ç¢ºä¿è£ç½®æœ‰è¶³å¤ çš„å„²å­˜ç©ºé–“

### 6. Firebase Storage ç¶²å€æ™‚æ•ˆ
- Firebase Storage çš„ä¸‹è¼‰ç¶²å€åŒ…å« token
- Token é•·æœŸæœ‰æ•ˆï¼Œä½†å»ºè­°å®šæœŸæ›´æ–°
- å¦‚æœ token éæœŸï¼Œé‡æ–°ä¸Šå‚³ APK å–å¾—æ–°ç¶²å€

---

## ğŸ”§ æŠ€è¡“å¯¦ä½œç´°ç¯€

### å°ˆæ¡ˆçµæ§‹
```
app/src/main/java/com/champion/king/
â”œâ”€â”€ data/api/dto/
â”‚   â””â”€â”€ VersionInfo.kt          # ç‰ˆæœ¬è³‡è¨Šè³‡æ–™æ¨¡å‹
â”œâ”€â”€ util/
â”‚   â”œâ”€â”€ UpdateManager.kt        # æ›´æ–°ç®¡ç†å™¨ï¼ˆç‰ˆæœ¬æ¯”å°ã€è¨­å®šç®¡ç†ï¼‰
â”‚   â””â”€â”€ ApkDownloader.kt        # APK ä¸‹è¼‰å™¨ï¼ˆDownloadManager æ•´åˆï¼‰
â””â”€â”€ MainActivity.kt              # è‡ªå‹•æª¢æŸ¥æ›´æ–°é‚è¼¯
    UserEditFragment.kt          # æ‰‹å‹•æª¢æŸ¥æ›´æ–° UI

app/src/main/res/
â”œâ”€â”€ layout/
â”‚   â””â”€â”€ fragment_user_edit.xml  # ç‰ˆæœ¬è³‡è¨Š UI
â””â”€â”€ xml/
    â””â”€â”€ file_paths.xml          # FileProvider è·¯å¾‘é…ç½®
```

### é—œéµé¡åˆ¥èªªæ˜

#### UpdateManager.kt
- ç‰ˆæœ¬æ¯”å°é‚è¼¯
- SharedPreferences è¨­å®šç®¡ç†
- å‘¼å«ç‰ˆæœ¬æª¢æŸ¥ API
- è™•ç†æ›´æ–°çµæœï¼ˆNoUpdate, HasUpdate, Maintenance, Errorï¼‰

#### ApkDownloader.kt
- ä½¿ç”¨ Android DownloadManager
- ç›£è½ä¸‹è¼‰é€²åº¦
- ä½¿ç”¨ FileProvider è™•ç†æª”æ¡ˆæ¬Šé™
- è·³è½‰åˆ°ç³»çµ±å®‰è£é é¢

#### VersionInfo.kt
```kotlin
data class VersionInfo(
    val versionCode: Int,
    val versionName: String,
    val downloadUrl: String,
    val updateType: String,
    val updateMessage: String,
    val maintenanceMode: Boolean,
    val maintenanceMessage: String
)
```

---

## ğŸ› å¸¸è¦‹å•é¡Œèˆ‡è§£æ±ºæ–¹æ¡ˆ

### Q1: æ›´æ–°å°è©±æ¡†æ²’æœ‰å½ˆå‡ºï¼Ÿ

**æª¢æŸ¥é …ç›®ï¼š**
1. Firestore çš„ `versionCode` æ˜¯å¦ > APP çš„ `versionCode`
2. æ˜¯å¦å·²ç™»å…¥
3. æ˜¯å¦é–‹å•Ÿã€Œè‡ªå‹•æª¢æŸ¥æ›´æ–°ã€
4. ç¶²è·¯é€£ç·šæ˜¯å¦æ­£å¸¸
5. æª¢æŸ¥ Logcat æ˜¯å¦æœ‰éŒ¯èª¤è¨Šæ¯

---

### Q2: ä¸‹è¼‰å¤±æ•—ï¼Ÿ

**å¯èƒ½åŸå› ï¼š**
1. ç¶²è·¯ä¸ç©©å®š â†’ åˆ‡æ›åˆ° WiFi
2. `downloadUrl` éŒ¯èª¤ â†’ æª¢æŸ¥ Firestore ç¶²å€æ˜¯å¦æ­£ç¢º
3. Storage æ¬Šé™å•é¡Œ â†’ æª¢æŸ¥ AndroidManifest.xml æ¬Šé™è¨­å®š

---

### Q3: ç„¡æ³•å®‰è£ APKï¼Ÿ

**å¯èƒ½åŸå› ï¼š**
1. APK ç°½åä¸ä¸€è‡´ â†’ ç¢ºä¿æ–°èˆŠç‰ˆæœ¬ä½¿ç”¨ç›¸åŒç°½å
2. æœªæˆæ¬Šå®‰è£æœªçŸ¥ä¾†æº â†’ å¼•å°ä½¿ç”¨è€…åˆ°è¨­å®šé–‹å•Ÿ
3. FileProvider é…ç½®éŒ¯èª¤ â†’ æª¢æŸ¥ `file_paths.xml`

---

### Q4: å®‰è£å¾Œç‰ˆæœ¬æ²’æ›´æ–°ï¼Ÿ

**å¯èƒ½åŸå› ï¼š**
1. æ–°ç‰ˆæœ¬çš„ `versionCode` æ²’æœ‰æ¯”èˆŠç‰ˆæœ¬å¤§
2. å®‰è£äº†éŒ¯èª¤çš„ APKï¼ˆdebug vs releaseï¼‰

---

### Q5: è·³éç‰ˆæœ¬å¾Œé‚„æ˜¯ä¸€ç›´æç¤ºï¼Ÿ

**åŸå› ï¼š**
- ã€Œè·³éç‰ˆæœ¬ã€åªå°è©²ç‰¹å®š `versionCode` æœ‰æ•ˆ
- å¦‚æœ Firestore åˆæ›´æ–°åˆ°æ›´é«˜çš„ç‰ˆæœ¬ï¼Œæœƒé‡æ–°æç¤º

---

## ğŸ“ æ”¯æ´èˆ‡ç¶­è­·

### Cloud Functions ç®¡ç†

**Function URLï¼š**
- checkVersion: `https://checkversion-qmvrvane7q-de.a.run.app/`
- login: `https://asia-east1-sca3-69342.cloudfunctions.net/login`
- register: `https://asia-east1-sca3-69342.cloudfunctions.net/register`

**æ‰€æœ‰ Functions éƒ¨ç½²åœ°å€ï¼š** `asia-east1`ï¼ˆå°ç£ï¼‰

**é‡æ–°éƒ¨ç½²æ–¹å¼ï¼š**
```bash
cd C:\championking-functions\functions
deploy.bat
```

### Firebase Console

**å°ˆæ¡ˆï¼š** sca3-69342  
**ä¸»æ§å°ï¼š** https://console.firebase.google.com/project/sca3-69342

**ç›¸é—œæœå‹™ï¼š**
- Firestore Databaseï¼ˆç‰ˆæœ¬è³‡è¨Šï¼‰
- Storageï¼ˆAPK æª”æ¡ˆï¼‰
- Cloud Functionsï¼ˆç‰ˆæœ¬æª¢æŸ¥ APIï¼‰

---

## ğŸ“š åƒè€ƒè³‡æ–™

- [Firebase Storage æ–‡ä»¶](https://firebase.google.com/docs/storage)
- [Firebase Firestore æ–‡ä»¶](https://firebase.google.com/docs/firestore)
- [Android DownloadManager](https://developer.android.com/reference/android/app/DownloadManager)
- [FileProvider æŒ‡å—](https://developer.android.com/reference/androidx/core/content/FileProvider)

---

## ğŸ“ ç‰ˆæœ¬æ­·å²

### v1.0.1 (2025-10-25)
- âœ… å¯¦ä½œå®Œæ•´çš„ APP å…§æ›´æ–°åŠŸèƒ½
- âœ… æ”¯æ´è‡ªå‹•æª¢æŸ¥å’Œæ‰‹å‹•æª¢æŸ¥
- âœ… æ•´åˆ Firebase Storage å’Œ Firestore
- âœ… å¯¦ä½œ APK ä¸‹è¼‰èˆ‡å®‰è£
- âœ… æ”¯æ´å¯é¸æ›´æ–°ã€å¼·åˆ¶æ›´æ–°ã€ç¶­è­·æ¨¡å¼

---

**æ–‡ä»¶æ›´æ–°æ—¥æœŸï¼š** 2025-10-25  
**æ–‡ä»¶ç‰ˆæœ¬ï¼š** 1.0